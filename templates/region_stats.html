<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/region.css') }}">
    <title>Region Statistics</title>
</head>
<body>
    <h1>Region-Based Statistics</h1>
    <p>Despite the fact, that region factor is not part of the calculations for the Medical Insurances, there are differences in some data entries! See some of the main differences with the button below:<p>
    <form method="POST">
        <button type="submit">Show Region Statistics</button>
    </form>

    {% if region_data %}
        <h2>Statistics by Region:</h2>
        <table border="1">
            <thead>
                <tr>
                    <th>Region</th>
                    <th>Average Age</th>
                    <th>Average BMI</th>
                    <th>Average Children</th>
                    <th>Average Charges</th>
                    <th>Smokers</th>
                    <th>Non-Smokers</th>
                </tr>
            </thead>
            <tbody>
                {% for region in region_data %}
                <tr>
                    <td>{{ region['region'] }}</td>
                    <td>{{ region['avg_age'] }}</td>
                    <td>{{ region['avg_bmi'] }}</td>
                    <td>{{ region['avg_children'] }}</td>
                    <td>{{ region['avg_charges'] }}</td>
                    <td>{{ region['smoker_count'] }}</td>
                    <td>{{ region['non_smoker_count'] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}

    <!-- Add this to your region_stats.html -->
<div class="download-button">
    <form action="/download_region_stats" method="get">
        <button type="submit" class="button-36">Download Region Stats (CSV) + Graph</button>
    </form>
</div>
<button class="button-36" role="button"><a href="{{ url_for('index') }}">Back to Home</a></button>

</body>
</html>
