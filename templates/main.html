<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/analyze.css') }}">
    <title>Insurance Analysis</title>
</head>
<body>
    <h1>Insurance Analysis Tool</h1>

    <form method="POST" action="/main">
    <button name="age">Average Age</button>
    <button name="gender">Gender Distribution</button>
    <button name="bmi">Average BMI</button>
    <button name="children">Average Children</button>
    <button name="smoker">Smoker vs Non-Smoker</button>
    <button name="region">Region Analysis</button>
    <button name="charges">Average Charges</button>
    <button name="compare">Compare User Data</button>
</form>

<hr>

{% if view == "age" %}
    <h2>Average Age</h2>
    <p>The average age in the dataset is: {{ avg_age }}</p>
{% elif view == "gender" %}
    <h2>Gender Distribution</h2>
    <p>Male: {{ male }} | Female: {{ female }}</p>
{% elif view == "bmi" %}
    <h2>Average BMI</h2>
    <p>The average BMI in the dataset is: {{ avg_bmi }}</p>
{% elif view == "children" %}
    <h2>Average Number of Children</h2>
    <p>The average number of children in the dataset is: {{ avg_children }}</p>
{% elif view == "smoker" %}
    <h2>Smoker vs Non-Smoker</h2>
    <p>Smokers: {{ smoker }} | Non-Smokers: {{ non_smoker }}</p>
{% elif view == "region" %}
    <h2>Region Analysis</h2>
    <ul>
        {% for region, count in region_counts.items() %}
            <li>{{ region }}: {{ count }}</li>
        {% endfor %}
    </ul>
{% elif view == "charges" %}
    <h2>Average Charges</h2>
    <p>The average charges in the dataset are: ${{ avg_charge }}</p>
{% elif view == "compare" %}
    <h2>Comparison Results</h2>
    {% if comparison_data %}
        <table border="1">
            <tr>
                <th>Attribute</th>
                <th>User Value</th>
                <th>Average Value</th>
                <th>Difference</th>
            </tr>
            <tr>
                <td>Age</td>
                <td>{{ comparison_data['User Age'] }}</td>
                <td>{{ comparison_data['Average Age'] }}</td>
                <td>{{ comparison_data['User Age'] - comparison_data['Average Age'] }}</td>
            </tr>
            <tr>
                <td>BMI</td>
                <td>{{ comparison_data['User BMI'] }}</td>
                <td>{{ comparison_data['Average BMI'] }}</td>
                <td>{{ comparison_data['User BMI'] - comparison_data['Average BMI'] }}</td>
            </tr>
            <tr>
                <td>Children</td>
                <td>{{ comparison_data['User Children'] }}</td>
                <td>{{ comparison_data['Average Children'] }}</td>
                <td>{{ comparison_data['User Children'] - comparison_data['Average Children'] }}</td>
            </tr>
            <tr>
                <td>Charges</td>
                <td>${{ comparison_data['User Charges'] }}</td>
                <td>${{ comparison_data['Average Charges'] }}</td>
                <td>${{ comparison_data['User Charges'] - comparison_data['Average Charges'] }}</td>
            </tr>
        </table>
    {% else %}
        <p>{{ error }}</p>
    {% endif %}
{% endif %}

</body>
</html>